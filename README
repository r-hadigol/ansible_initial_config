# Initial Ansible Configuration Guide
#
# Description:
# In a real network with hundreds of servers, making manual modifications can take a huge amount of time.
# To automate server management, we use Ansible. 
#
# When connecting to servers for the first time, SSH will prompt to confirm the host key.
# This guide ensures that "host key checking" is handled automatically.
#
# Also note:
# We aim for passwordless connections for automation and better security, using SSH public/private keys.
#
# To allow Ansible to initially connect with a password (for first-time setup), 
# the "sshpass" package is required. This playbook will check for it and install it if necessary on the control node.
#
# Inventory Files:
# 1. hosts_initial:
#    - Contains the initial servers and the first user (e.g., reza) with its password.
#    - Used only for bootstrapping: creating the ansible user, copying public keys, and configuring sudo.
#    - Can be deleted or archived after the bootstrap process is complete.
#
# 2. hosts_final:
#    - Contains all servers with the ansible user configured for passwordless SSH.
#    - This file is used for all subsequent Ansible automation tasks.
#    - For new projects, update this file to include only the relevant servers and ansible users.
#
# Testing:
# 1. To run playbook:
     ansible-playbook -i /etc/ansible/hosts_initial playbook.yml --ask-pass --ask-become-pass

# 2. To test SSH connection without a password:
     ssh ansible@192.168.127.136

# 3. To test a simple Ansible command:
     ansible all -i /etc/ansible/hosts_final -m ping
#
# 4. To test a command that requires sudo privileges:
     ansible all -i /etc/ansible/hosts_final -m command -a "whoami" -b
#    If no password is asked, the configuration is working correctly.

##### After successful test it is recommended to remove hosts_initial files ####
